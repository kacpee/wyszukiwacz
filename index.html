<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Wyszukiwacz Plus 0.09</title>
  <link rel="icon" type="image/x-icon" href="image.png">
  <style>
    /* Reset styl√≥w */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Segoe UI', Roboto, Arial, sans-serif;
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      transition: background-color 0.3s ease, color 0.3s ease;
      line-height: 1.6;
    }

    h1 {
      font-size: 28px;
      text-align: center;
      margin-bottom: 25px;
    }

    h3, h4 {
      margin-top: 25px;
    }

    textarea, input[type="number"] {
      width: 100%;
      padding: 12px;
      font-size: 16px;
      border-radius: 10px;
      border: 1px solid var(--border-color);
      background-color: var(--input-bg);
      color: var(--text-color);
      margin-bottom: 15px;
      transition: border-color 0.2s ease, background-color 0.2s ease;
    }

    textarea:focus, input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 2px var(--accent-transparent);
    }

    label {
      display: block;
      margin: 6px 0;
      cursor: pointer;
    }

    .subcategory {
      margin-left: 15px;
      opacity: 0.9;
    }

    .button-group {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-top: 25px;
    }

    button {
      padding: 12px 25px;
      font-size: 16px;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      transition: background-color 0.2s ease, transform 0.1s ease;
    }

    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    button:hover:not(:disabled) {
      transform: translateY(-2px);
    }

    #searchButton {
      background-color: var(--accent);
      color: #fff;
    }

    #searchButton:hover {
      background-color: var(--accent-hover);
    }

    button:nth-child(2) {
      background-color: var(--neutral);
      color: var(--text-color);
    }

    .hidden {
      display: none;
    }

    /* Motyw jasny */
    :root {
      --bg-color: #fafafa;
      --text-color: #222;
      --input-bg: #fff;
      --border-color: #ccc;
      --accent: #0078d7;
      --accent-hover: #005ea6;
      --accent-transparent: rgba(0, 120, 215, 0.3);
      --neutral: #e0e0e0;
    }

    /* Motyw ciemny */
    @media (prefers-color-scheme: dark) {
      :root {
        --bg-color: #1e1e1e;
        --text-color: #f5f5f5;
        --input-bg: #2b2b2b;
        --border-color: #444;
        --accent: #339cff;
        --accent-hover: #5cb6ff;
        --accent-transparent: rgba(51, 156, 255, 0.25);
        --neutral: #444;
      }
    }

    body {
      background-color: var(--bg-color);
      color: var(--text-color);
    }

    .header {
      text-align: center;
      margin-bottom: 30px;
    }

    .section {
      background-color: var(--input-bg);
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }

    @media (prefers-color-scheme: dark) {
      .section {
        box-shadow: 0 2px 8px rgba(255,255,255,0.05);
      }
    }

  </style>
</head>
<body>
  <div class="header">
    <h1>üîç Wyszukiwacz Plus</h1>
    <p>Szukanie w wielu sklepach jednocze≈õnie z automatycznym sortowaniem</p>
  </div>

  <div class="section">
    <p><strong>Wprowad≈∫ nazwƒô/ean (ka≈ºde w nowej linii):</strong></p>
    <textarea id="inputValue" rows="6" placeholder="poszewka&#10;poduszka&#10;lampka nocna"></textarea>

    <label for="minQuantity" id="minQuantityLabel" class="hidden"><strong>Liczba sztuk od (dla Allegro):</strong></label>
    <input type="number" id="minQuantity" class="hidden" placeholder="np. 10" min="1">

    <h3>Wybierz sklepy:</h3>
    <label><input type="checkbox" id="selectAll"> <strong>Zaznacz / odznacz wszystkie</strong></label>

    <div id="shops">
      <label><input type="checkbox" class="shop" value="castorama"> Castorama</label>
      <label><input type="checkbox" class="shop" value="leroymerlin"> Leroy Merlin</label>
      <label><input type="checkbox" class="shop" value="obi"> OBI</label>
      <label><input type="checkbox" class="shop" value="mrowka"> Mr√≥wka</label>
      <label><input type="checkbox" class="shop" value="action"> Action</label>
      <label><input type="checkbox" class="shop" value="jysk"> Jysk</label>
      <label><input type="checkbox" class="shop" value="empik"> Empik</label>
      <label><input type="checkbox" class="shop" value="allegro"> Allegro</label>
      <h4>Zwierzƒôta:</h4>
      <div class="subcategory">
        <label><input type="checkbox" class="shop" value="zooplus"> Zooplus</label>
        <label><input type="checkbox" class="shop" value="maxizoo"> Maxi Zoo</label>
        <label><input type="checkbox" class="shop" value="bitiba"> Bitiba</label>
      </div>
    </div>

    <label><br><input type="checkbox" id="googleSearch"> Wyszukaj przez Google (site:sklep.pl)</label>

    <div class="button-group">
      <button id="searchButton" onclick="searchAll()" disabled>Szukaj</button>
      <button onclick="resetForm()">Resetuj</button>
    </div>
  </div>

  <script>
    const selectAllCheckbox = document.getElementById("selectAll");
    const shopCheckboxes = document.querySelectorAll(".shop");
    const inputValue = document.getElementById("inputValue");
    const searchButton = document.getElementById("searchButton");
    const minQuantityInput = document.getElementById("minQuantity");
    const minQuantityLabel = document.getElementById("minQuantityLabel");

    // Pokazuj/ukrywaj pole liczby sztuk przy Allegro
    shopCheckboxes.forEach(cb => {
      cb.addEventListener("change", () => {
        const allegroSelected = document.querySelector('.shop[value="allegro"]').checked;
        minQuantityInput.classList.toggle("hidden", !allegroSelected);
        minQuantityLabel.classList.toggle("hidden", !allegroSelected);
      });
    });

    // Zaznacz/Odznacz wszystkie
    selectAllCheckbox.addEventListener("change", function () {
      shopCheckboxes.forEach(cb => cb.checked = this.checked);
      const allegroSelected = document.querySelector('.shop[value="allegro"]').checked;
      minQuantityInput.classList.toggle("hidden", !allegroSelected);
      minQuantityLabel.classList.toggle("hidden", !allegroSelected);
    });

    // Aktywacja przycisku po wpisaniu tekstu
    inputValue.addEventListener("input", () => {
      searchButton.disabled = !inputValue.value.trim();
    });

    // Obs≈Çuga Entera
    inputValue.addEventListener("keypress", e => {
      if (e.key === "Enter" && !searchButton.disabled) {
        e.preventDefault();
        searchAll();
      }
    });

    function searchAll() {
      const inputText = inputValue.value.trim();
      const minQuantity = minQuantityInput.value.trim();
      const selectedShops = Array.from(document.querySelectorAll('.shop:checked')).map(cb => cb.value);
      const googleSearchEnabled = document.getElementById('googleSearch').checked;

      if (!inputText) return alert("Wprowad≈∫ co najmniej jedno has≈Ço.");
      if (selectedShops.length === 0) return alert("Zaznacz co najmniej jeden sklep.");

      const terms = inputText.split('\n').map(line => line.trim()).filter(Boolean);

      const urls = {
        castorama: t => `https://www.castorama.pl/search?sort=product.price&term=${t}`,
        leroymerlin: t => `https://www.leroymerlin.pl/search?q=${t}&sort=price-asc`,
        obi: t => `https://www.obi.pl/search/${t}/?sortprice=asc`,
        mrowka: t => `https://mrowka.com.pl/wyszukiwanie?_Search=${t}`,
        action: t => `https://www.action.com/pl-pl/search/?sortBy=PRICE_ASC&q=${t}`,
        jysk: t => `https://jysk.pl/search?query=${t}&sort=price_asc&type=product`,
        empik: t => `https://www.empik.com/szukaj/produkt?qtype=facetForm&sort=priceAsc&q=${t}`,
        zooplus: t => `https://www.zooplus.pl/search/results?q=${t}&sorting=lowest-price`,
        maxizoo: t => `https://www.maxizoo.pl/search/?text=${t}&sort=price-asc`,
        bitiba: t => `https://www.bitiba.pl/search/results?q=${t}&sorting=lowest-price`,
        allegro: t => {
          const qty = minQuantity ? `&liczba-sztuk=${minQuantity}` : '';
          return `https://business.allegro.pl/listing?string=${t}&order=p${qty}&miejsce-wysylki=polska&stan=nowe&offerTypeBuyNow=1`;
        }
      };

      terms.forEach(term => {
        const encoded = encodeURIComponent(term);
        selectedShops.forEach(shop => {
          if (googleSearchEnabled) {
            window.open(`https://www.google.com/search?q=site:${shop}.pl+${encoded}`, '_blank');
          } else if (urls[shop]) {
            window.open(urls[shop](encoded), '_blank');
          }
        });
      });
    }

    function resetForm() {
      inputValue.value = "";
      minQuantityInput.value = "";
      searchButton.disabled = true;
      shopCheckboxes.forEach(cb => cb.checked = false);
      selectAllCheckbox.checked = false;
      document.getElementById('googleSearch').checked = false;
      minQuantityInput.classList.add("hidden");
      minQuantityLabel.classList.add("hidden");
    }
  </script>
</body>
</html>


